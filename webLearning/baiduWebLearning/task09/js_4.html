<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>JavaScript里面的居民们</title>
</head>

<body>
	<p>任务1：：按照HTML中按钮的描述以此实现功能<br>
	计算结果显示在 id 为 result 的 P 标签中<br>
	除了第一个按钮，其它按钮操作时，都需要判断输入是否为数字，否则在 console 中输出错误信息</p>
	<div>
    <label>Number A:<input id="radio-a" type="radio" name="math-obj" value="a" checked="checked"></label><input id="num-a" type="text">
    <label>Number B:<input id="radio-b" type="radio" name="math-obj" value="b"></label><input id="num-b" type="text">
	</div>
	<div>
		<button>判断当前选中的输入框输入内容是否为数字</button>
		<button>把 A 四舍五入为 B 个小数位数的数字</button>
		<button>当前选中数字的绝对值</button>
		<button>对当前选中的数字进行上舍入</button>
		<button>对当前选中的数字进行下舍入</button>
		<button>把当前选中的数字四舍五入为最接近的整数</button>
		<button>返回 A 和 B 中的最高值</button>
		<button>返回 A 和 B 中的最低值</button>        
	</div>
	<p id="result"></p>
	<script>
		var radioa=document.querySelector('#radio-a');
		var radiob=document.querySelector('#radio-b');
		var numa=document.querySelector('#num-a');
		var numb=document.querySelector('#num-b');
		var result=document.querySelector('#result');
		var btns=document.querySelectorAll('button');
		var rex=/^(-?\d+)(\.\d+)?$/;
		for(let i=0;i<btns.length;i++){
			btns[i].onclick=function change(){
				if(i==1){
					var numbPow=Math.pow(10,numb.value);
					result.innerHTML=(Math.round(numa.value*numbPow)/numbPow).toFixed(numb.value);
				}else if(i==6){
					result.innerHTML=Math.max(numa.value,numb.value);
				}else if(i==7){
					result.innerHTML=Math.min(numa.value,numb.value);
				}else{
					if(radioa.checked){
						if(i==0){
							if(rex.test(numa.value)){
								result.innerHTML="当前所选输入框的内容为数字！";	
							}else{
								result.innerHTML="当前所选输入框的内容不是数字！";
							};
						}else if(i==2){
							result.innerHTML=Math.abs(numa.value);
						}else if(i==3){
							result.innerHTML=Math.ceil(numa.value);
						}else if(i==4){
							result.innerHTML=Math.floor(numa.value);
						}else if(i==5){
							result.innerHTML=Math.round(numa.value);
						}else{
							result.innerHTML='发生未知错误';
						};
					};
					if(radiob.checked){
						if(i==0){
							if(rex.test(numb.value)){
								result.innerHTML="当前所选输入框的内容为数字！";	
							}else{
								result.innerHTML="当前所选输入框的内容不是数字！";
							};
						}else  if(i==2){
							result.innerHTML=Math.abs(numb.value);
						}else if(i==3){
							result.innerHTML=Math.ceil(numb.value);
						}else if(i==4){
							result.innerHTML=Math.floor(numb.value);
						}else if(i==5){
							result.innerHTML=Math.round(numb.value);
						}else{
							result.innerHTML='发生未知错误';
						};	
					};
				};
			};
		};
	</script>
	
	
	
	
	<p>任务2：：按照HTML中按钮的描述以此实现功能<br>
	计算结果显示在 id 为 result 的 P 标签中	
	</p>
	<div>
		<label>String A:
			<input id="radio-stra" type="radio" checked="true" name="str-obj" value="a">
		</label>
		<textarea id="str-a"></textarea>
		<label>String B:
			<input id="radio-strb" type="radio" name="str-obj" value="b">
		</label>
		<textarea id="str-b"></textarea>        
		<label>Num A：<input id="num-stra" type="number" value="0"></label>
		<label>Num B：<input id="num-strb" type="number" value="1"></label>
	</div>
	<div id="btn-box">
		<button>获取当前选中输入的内容长度</button>
		<button>当前选中输入中的第3个字符</button>
		<button>把两个输入框的文字连接在一起输出（concat）</button>
		<button>输入B中的内容，在输入A的内容中第一次出现的位置（indexOf）</button>
		<button>输入A中的内容，在输入B的内容中最后一次出现的位置（lastIndexOf）</button>
		<button>使用slice获取选中输入框内容的部分内容，参数为num-a及num-b</button>
		<button>当前选中输入框的行数</button>
		<button>使用substr获取选中输入框内容的子字符串，参数为num-a及num-b</button>
		<button>把所选输入框中的内容全部转为大写</button>
		<button>把所选输入框中的内容全部转为小写</button>
		<button>把所选输入框中内容的半角空格全部去除</button>
		<button>把所选输入框中内容的a全部替换成另外一个输入框中的内容</button>
	</div>
	<p id="result1"></p>
	<script>
		var radioStra=document.querySelector('#radio-stra');
		var radioStrb=document.querySelector('#radio-strb');
		var textStra=document.querySelector('#str-a');
		var textStrb=document.querySelector('#str-b');
		var numStra=document.querySelector('#num-stra');
		var numStrb=document.querySelector('#num-strb');
		var result1=document.querySelector('#result1');
		var btnBox=document.querySelector('#btn-box');
		var btns1=btnBox.querySelectorAll('button');
		for(let i=0;i<btns1.length;i++){
			btns1[i].onclick=function (){
				var text1=textStra.value;
				var text2=textStrb.value;
				var numaValue=numStra.value;
				var numbValue=numStrb.value;
				if(i==2){
					result1.innerHTML=text1.concat(text2);
				}else if(i==3){
					result1.innerHTML=text1.indexOf(text2);
				}else if(i==4){
					result1.innerHTML=text2.lastIndexOf(text1);
				}else{
					if(radioStra.checked){
						if(i==0){
							result1.innerHTML=text1.length;
						}else if(i==1){
							result1.innerHTML=text1[2];
						}else if(i==5){
							result1.innerHTML=text1.slice(numaValue,numbValue);
						}else if(i==6){
							/*var arr=text1.replace(/[\r\n]/gi,',');
							var strArr=arr.split(',');*/
							result1.innerHTML=Math.round((textStra.scrollHeight)/15);
						}else if(i==7){
							result1.innerHTML=text1.substr(numaValue,numbValue);
						}else if(i==8){
							result1.innerHTML=text1.toUpperCase();
						}else if(i==9){
							result1.innerHTML=text1.toLowerCase();
						}else if(i==10){
							textStra.value=text1.replace(/[ ]/g,'');
						}else if(i==11){
							textStra.value=text1.replace(/[a]/g,text2);
						}else{
							result1.innerHTML='出现未知错误！';
						};
					};
					if(radioStrb.checked){
						if(i==0){
							result1.innerHTML=text2.length;
						}else if(i==1){
							result1.innerHTML=text2[2];
						}else if(i==5){
							result1.innerHTML=text2.slice(numaValue,numbValue);
						}else if(i==6){
							/*var arr=text2.replace(/[\r\n]/gi,',');
							var strArr=arr.split(',');*/
							result1.innerHTML=Math.round((textStrb.scrollHeight)/15);
						}else if(i==7){
							result1.innerHTML=text2.substr(numaValue,numbValue);
						}else if(i==8){
							result1.innerHTML=text2.toUpperCase();
						}else if(i==9){
							result1.innerHTML=text2.toLowerCase();
						}else if(i==10){
							textStrb.value=text2.replace(/[ ]/g,'');
						}else if(i==11){
							textStrb.value=text2.replace(/[a]/g,text1);
						}else{
							result1.innerHTML='出现未知错误！';
						};
					};
				};
			};
			
		};
	</script>
	
	
	
	<p>任务3：：<br />分别实现 diyTrim 及 removeRepetition 函数，并跑通代码中的测试用例。<br>	
	实现一个字符串头尾去除空格的函数<br>	
	注意需要去除的空格，包括全角、半角空格<br>	
	暂时不需要学习和使用正则表达式的方式</p>
	<script>
		function diyTrim(str) {
			var result = "";
			for(var i=0;i<str.length;i++){
				if(str[i]!==" "&&str[i]!=="　"){
					break;
				};	
			};
			for(var j=str.length-1;j>0;j--){
				if(str[j]!==" "&&str[j]!=="　"){
					break;
				};	
			};
			result=str.slice(i,j+1);
			return result;
			
		}
		
		// 测试用例
		console.log(diyTrim('任务3 '+' a f b    ')); // ->a f b
		console.log(diyTrim('    ffdaf    ')); // ->ffdaf
		console.log(diyTrim('1    ')); // ->1
		console.log(diyTrim('　　f')); // ->f
		console.log(diyTrim('  　  a f b 　　 ')); // ->a f b
		console.log(diyTrim(' ')); // ->
		console.log(diyTrim('　')); // ->
		console.log(diyTrim('')); // ->
		
		/*
		去掉字符串str中，连续重复的地方
		*/
		function removeRepetition(str) {
			var result =str.split('');
			for(var i=0;i<result.length;i++){
				if(result[i]==result[i+1]){
					result.splice(i,1);
					i=i-1;	
				};
			}
			return result.join('');
		}
		
		//测试用例
		console.log(removeRepetition("aaa")); // ->a
		console.log(removeRepetition("abbba")); // ->aba
		console.log(removeRepetition("aabbaabb")); // ->abab
		console.log(removeRepetition("")); // ->
		console.log(removeRepetition("abc")); // ->abc
	</script>
	
	
	
	
	<p>任务4：：<br />有如下对象，分别实现代码下方的几个函数，满足以下需求：<br>	
	假设id和name均不会重复，根据输入name找到对应的id<br>	
	假设id和name均不会重复，根据输入id找到对应的name<br>	
	把这个对象中所有的名字以“前序遍历”的方式全部输出到console中<br>	
	把这个对象中所有的名字以“中序遍历”的方式全部输出到console中<br>	
	把这个对象中所有的名字以“后序遍历”的方式全部输出到console中</p>
	<script>
		var tree = {
			"id": 0,
			"name": "root",
			"left": {
				"id": 1,
				"name": "Simon",
				"left": {
					"id": 3,
					"name": "Carl",
					"left": {
						"id": 7,
						"name": "Lee",
						"left": {
							"id": 11,
							"name": "Fate"
						}
					},
					"right": {
						"id": 8,
						"name": "Annie",
						"left": {
							"id": 12,
							"name": "Saber"
						}
					}
				},
				"right": {
					"id": 4,
					"name": "Tony",
					"left": {
						"id": 9,
						"name": "Candy"
					}
				}
			},
			"right": {
				"id": 2,
				"name": "right",
				"left": {
					"id": 5,
					"name": "Carl",
				},
				"right": {
					"id": 6,
					"name": "Carl",
					"right": {
						"id": 10,
						"name": "Kai"
					}        
				}
			}
		}
	findIdByName('Saber');
	// 假设id和name均不会重复，根据输入name找到对应的id
	function findIdByName(name) {
		lookfor(tree,name);
		function lookfor(parent,name){
			for(var x in parent){
				if(parent[x]==name){
					console.log('任务4'+parent.id);
				};
				if(typeof(parent[x])=='object'){
					lookfor(parent[x],name);
				};
				
			};
		};
	};
	findNameById('7');
	// 假设id和name均不会重复，根据输入id找到对应的name
	function findNameById(id) {
		lookfor(tree,id);
		function lookfor(parent,name){
			for(var x in parent){
				if(parent[x]==id){
					console.log(parent.name);
				};
				if(typeof(parent[x])=='object'){
					lookfor(parent[x],id);
				};
				
			};
		};
	}
	

	// 把这个对象中所有的名字以“前序遍历”的方式全部输出到console中
	getListWithDLR();
	function getListWithDLR() {
		WithDLR(tree);
		function WithDLR(parent){
			console.log(parent.name);
			if(parent.left){
				WithDLR(parent.left);
			};
			if(parent.right){
				WithDLR(parent.right)
			};
		};
	}
	getListWithLDR();
	// 把这个对象中所有的名字以“中序遍历”的方式全部输出到console中
	function getListWithLDR() {
		WithLDR(tree);
		function WithLDR(parent){
			if(parent.left){
				WithLDR(parent.left);
			};
			console.log(parent.name);
			if(parent.right){
				WithLDR(parent.right)
			};
		};
	}
	getListWithLRD()
	// 把这个对象中所有的名字以“后序遍历”的方式全部输出到console中
	function getListWithLRD() {
		WithLRD(tree);
		function WithLRD(parent){
			if(parent.left){
				WithLRD(parent.left);
			};
			if(parent.right){
				WithLRD(parent.right)
			};
			console.log(parent.id);
		};
	}
	</script>
	
	
	
	<p>任务5：：<br>基于代码，实现如按钮中描述的功能：<br>
	实现如阅读材料中，队列的相关入队、出队、获取队头、判空的操作<br>
	队头对应数组中最后一个元素<br>
	入队和出队操作后，需要在 id 为 queue-cont 的 p 标签中更新显示队列中的内容，队头在最右侧，中间用 -> 连接（练习使用数组的join方法）</p>
	<input id="queue-input" type="text">
	<p id="queue-cont">队列内容：apple-&gt;pear</p>  
	<div id="task5-btn"> 
		<button id="in-btn">入队</button>
		<button id="out-btn">出队</button>
		<button id="font-btn">打印队头元素内容</button>
		<button id="empty-btn">判断队列是否为空</button>
	</div>  
	<script>
		var queue = ["apple", "pear"];
		var queueInput=document.querySelector('#queue-input');
		var queueCont=document.querySelector('#queue-cont');
		var task5Btn=document.querySelector('#task5-btn');
		var btns2=task5Btn.querySelectorAll('button');
		
		btns2[0].onclick=function (){
			var queueValue=queueInput.value;
			queue.unshift(queueValue);
			/*队头在最左侧
			//queue.push(queueValue);*/
			var queueAdd=queue.join('->');
			queueCont.innerHTML='队列内容：'+queueAdd;
		};
		btns2[1].onclick=function (){
			queue.pop(queue);
			/*//队头在最左侧
			queue.shift(queue);*/
			var queueAdd=queue.join('->');
			queueCont.innerHTML='队列内容：'+queueAdd;
		};
		btns2[2].onclick=function (){
			var len=queue.length;
			queueInput.value='队头元素：'+queue[len-1];
			/*表头在最左侧
			queueInput.value='队头元素：'+queue[0];*/
		};
		btns2[3].onclick=function (){
			var len=queue.length;
			if(len==0){
				queueInput.value='队列为空';
			}else{
				queueInput.value='队列不为空';
			};
		};
	</script>
	
	
	
	
	<p>任务6：：排序<br>
		arr = [43, 54, 4, -4, 84, 100, 58, 27, 140];<br>
		将上面数组分别按从大到小以及从小到大进行排序后在console中输出<br>
		arr = ['apple', 'dog', 'cat', 'car', 'zoo', 'orange', 'airplane'];<br>
		将上面数组分别按字母顺序a-z及z-a进行排序，在console中输出<br>
		arr = [[10, 14], [16, 60], [7, 44], [26, 35], [22, 63]];<br>
		将上面的二维数组，按照每个元素中第二个数从大到小的顺序进行排序输出：
		将arr4数组分别按元素对象的value值从小到大进行排序后输出
	</p>
	<p>排序结果：</p>
	<p id="result6"></p>
	<script>
		var result6=document.querySelector("#result6");
		var arr1 = [43, 54, 4, -4, 84, 100, 58, 27, 140];
		var arr2 = ['apple', 'dog', 'cat', 'car', 'zoo', 'orange', 'airplane'];
		var arr3 = [[10, 14], [16, 60], [7, 44], [26, 35], [22, 63]];
		var arr4 = [
			{
				id: 1,
				name: 'candy',
				value: 40
			}, {
				id: 2,
				name: 'Simon',
				value: 50
			}, {
				id: 3,
				name: 'Tony',
				value: 45
			}, {
				id: 4,
				name: 'Annie',
				value: 60
			}
		];

		arr1.sort((a,b)=>a-b);
		arr3.sort((a,b)=>a[1]-b[1]);
		arr4.sort((a,b)=>a.value-b.value);
		result6.innerHTML+='arr1升序：'+arr1+'<br>';
		result6.innerHTML+='arr1降序：'+arr1.reverse()+'<br>';
		result6.innerHTML+='arr2排序a-z：'+arr2.sort()+'<br>';
		result6.innerHTML+='arr2排序z-a：'+arr2.sort().reverse()+'<br>';
		result6.innerHTML+='arr3按第二个元素降序：'+arr3+'<br>';
		result6.innerHTML+='arr4按value值升序：+见console输出台'+'<br>';
		console.log(arr4);
	</script>
	
	<p>任务7：：学习通用的数据用不同的数据结构进行存储，以及相互的转换<br>
	对象转为数组：<br>
	数组转为对象：<br>
	</p>
	<script>
	//对象转为数组：
		var scoreObject = {
			"Tony": {
				"Math": 95,
				"English": 79,
				"Music": 68
			}, 
			"Simon": {
				"Math": 100,
				"English": 95,
				"Music": 98
			}, 
			"Annie": {
				"Math": 54,
				"English": 65,
				"Music": 88
			}
		};
		function objToArr(obj){
            result = []
            for(var o in obj){
                result.push([o,obj[o]])
            }
            for(var i=0;i<result.length;i++){
                var tempObj = result[i].pop();
                for(var r in tempObj){
                    result[i].push(tempObj[r]);
                }
            }
            return result;
        }
		var menuArr = [
			[1, "Area1", -1],
			[2, "Area2", -1],
			[3, "Area1-1", 1],
			[4, "Area1-2", 1],
			[5, "Area2-1", 2],
			[6, "Area2-2", 2],
			[7, "Area1-2-3", 4],
			[8, "Area2-2-1", 6],
		];
		function arrToObj(arr){
            var obj = {0:{}}
            for(var i=0;i<arr.length;i++){
                obj[arr[i][0]]={'name':arr[i][1]};
                if(arr[i][2]==-1){
                    obj[0][arr[i][0]] = obj[arr[i][0]];
                }else {
                    if(obj[arr[i][2]]['subMenu'])
                    {obj[arr[i][2]]['subMenu'][arr[i][0]] = obj[arr[i][0]]; }
                    else{
                        obj[arr[i][2]]['subMenu']={};
                        obj[arr[i][2]]['subMenu'][arr[i][0]] = obj[arr[i][0]];
                    }                   
                }
            }
            return obj['0'];
        }
		
	console.log(arrToObj(menuArr));

		
	</script>
</body>
</html>
